<!-- Generated by SpecStory -->

# Generate cursor rules (2025-08-08 10:34Z)

_**User**_

/Generate Cursor Rules 

---

_**Assistant**_

<think><details><summary>Thought Process</summary>**Generating Cursor Rules**

I need to generate Cursor Rules for the project, which seems to be a Dart/Flutter project given the workspace path. The user’s command is clear: I should create Cursor Rules files in the specified directory. Following the developer's instructions, I'll create the relevant .mdc files. I’m debating whether to use apply_patch or edit_file. Since we haven't opened any existing files and we're creating new ones, I can proceed with apply_patch for adding operations without needing to read first. Now, I just need to clarify the rules to generate.
**Scanning Project Structure**

The project named 'dart_simple_live' likely focuses on Flutter desktop/mobile live streaming. I need to explore the repository's structure, so I'll start by running list_dir to examine the files at the root and in the lib/ directory. I should prioritize discovering key files like pubspec.yaml to gather information on the project structure, package management, and code style. I’ll also look at analysis_options.yaml and README.md for additional context. Utilizing parallel tool calls will help me collect this information efficiently!
**Listing Flutter Directories**

I want to look at the typical directories for a Flutter project, which include android, ios, web, windows, linux, and macos. I’ll run list_dir for these specific directories, and I think it’s fine if some return errors, as that might just mean those directories don’t exist. I just need to remember that when running parallel calls, I should only include tools that are allowed to prevent unnecessary errors. Let's proceed and see what I can find!</details></think>

---

我先做一次快速项目扫描以生成合适的 Cursor 规则文件：读取项目结构与关键配置（如 `pubspec.yaml`、`analysis_options.yaml`、`README.md`），并检查是否已有 `.cursor/rules` 目录和规则文件。随后我会创建一组规则文件（项目结构、Dart/Flutter 代码风格、测试与脚本、贡献与提交规范等）到 `.cursor/rules/*.mdc`。

---

<details>
            <summary>Listed directory undefined • **0** results</summary>
        
No results found
</details>

---

Model provided non-existent directory

---

Model provided non-existent directory

---

Could not find file 'pubspec.yaml' in the workspace.

---

Read file: undefined

---

Could not find file 'analysis_options.yaml' in the workspace.

---

Model provided non-existent directory

---

Model provided non-existent directory

---

Model provided non-existent directory

---

Model provided non-existent directory

---

Model provided non-existent directory

---

Model provided non-existent directory

---

Model provided non-existent directory

---



---

我将并行读取关键文件以确认项目的网络层、入口和路由结构，然后生成 `.cursor/rules/*.mdc` 文件。

---

Read file: undefined

---

Read file: undefined

---

Read file: undefined

---

Read file: undefined

---

Read file: undefined

---

Read file: undefined

---

Read file: undefined

---

Read file: undefined

---

Read file: undefined

---

Read file: undefined

---

Read file: undefined

---

Read file: undefined

---

<think><details><summary>Thought Process</summary>**Considering logging and code structure**

I'm thinking it’s worthwhile to suggest using a Log class that supports asynchronous code, emphasizing error handling, naming conventions, guard clauses, and avoiding deep nesting. Helping AI navigate code is crucial, maybe even more than just focusing on style.

For Flutter navigation with GetX, referencing `GetMaterialApp` and `AppPages.routes` could be useful for adding pages. 

Networking details, like `HttpClient` error handling and interceptors, are essential too. I should also cover logging and the core library for extending functionality, like adding new live sites. Therefore, I can reference files, given their paths exist.
**Preparing testing documentation**

I'm focusing on how to provide clear guidance on testing locations, as each module has its own test directories. I’ll offer quick tips for using `flutter test` or `dart test`, and it's vital the metadata frontmatter is correctly formatted, with lowercase keys like `alwaysApply`, `description`, and `globs` as per the instructions. 

For creating files, I'll utilize `apply_patch`, ensuring V4A diff formatting, and need to set up a `.cursor/rules` directory. I'll remember to prepare the content in Chinese, use Markdown for formatting, and give a status update before each tool call along with a summary at the end.
**Clarifying apply_patch usage**

I’m planning to begin with a status update before using the `apply_patch` tool to add multiple files. However, I need to clarify its limitations: the tool typically handles one file per call. It specifies that the patch can update individual files, and each change snippet corresponds to a single file. 

It seems that while I can create multiple "File:" sections within a patch in V4A diff format, I should expect to make separate calls for each file to ensure everything is processed correctly. The "file_path" parameter does seem a bit confusing.
**Deciding on patching methods**

I've often used `apply_patch` to include multiple files by passing a file path like "." in the past, but the tool schema really requires a single file path for safety. So, to play it safe, I should call `apply_patch` separately for each file, even though it feels a bit heavy on resources. 

Alternatively, I could consider using `edit_file` to create new file content, but that tool should only be a fallback if `apply_patch` fails. The idea of running multiple `apply_patch` calls in parallel really appeals to me since maximizing efficiency is key. I'll likely create about six files and run those calls in parallel, even though I'm pondering the necessity of a root `.cursor/rules/index.mdc` aggregator.
**Crafting rule file contents**

I'm preparing to create several rule files, starting with `.cursor/rules/project-structure.mdc`, which will include an overview and details about various components of the project, like sub-projects and networking. 

Next, I'll outline other files like `.cursor/rules/dart-style.mdc` for Dart coding conventions, and `.cursor/rules/getx-navigation.mdc` for GetX routing. I’ll also make `.cursor/rules/networking.mdc` and `.cursor/rules/logging-debug.mdc`, detailing HTTP client usage and logging features.

Each file will contain relevant descriptions and code snippets where necessary. I’ll use `multi_tool_use.parallel` to execute those `apply_patch` calls. And before that, I’ll provide a status update in Chinese and follow up with a summary of created files after everything's executed.</details></think>

---

我已完成项目结构的快速扫描。现在将并行创建 `.cursor/rules` 目录下的一组规则文件，覆盖项目结构、GetX 路由约定、网络与错误处理、日志与调试、Dart/Flutter 风格以及核心库扩展与测试指引。随后我会给出简要总结。

---



---



---



---



---



---



---



---

<think><details><summary>Thought Process</summary>**Analyzing patch issues**

It seems I’m getting confused about the V4A diff format. I know that the '+' and '-' signs are meant to mark old and new lines. Inside the 'context_before' snippet, a '-' line is required, but the 'Add File' format shouldn’t start with '-'. It’s puzzling since past submissions with bullet points starting with '-' worked. The errors might be due to certain lines resembling code diffs or possibly em dashes. There’s definitely something unexpected here!
**Revising patch application**

I’m thinking about trying to apply the patch again, but with slight modifications to avoid those ambiguous bullet lines at the start of the files. In previous successful patches, those bullet lines were fine, so I want to run the apply_patch for 'dart-style.mdc' without the problematic line. We can restructure the UI section to eliminate hyphenated bullets and use '参考: ' instead. I'll also create 'testing-and-run.mdc' with normal bullet lines, making sure to leave some blank lines around, and reference the Cursor rules accurately. Let’s make it work!
**Creating PR guidelines**

I’m considering whether we need to create guidelines for the PR, but it seems unnecessary at this point. We have to run the "read_lints" tool after making changes, but since these are .mdc files and not Dart code, running lints isn't really applicable. The previous update suggested running lints, but since we only modified documentation, it's not needed. They also want Chinese responses, so I’ll keep that in mind. Lastly, we need to focus on adding the two missing files again without the problematic bullet line.
**Adjusting content for patches**

It looks like the issue starts with the '- -' causing the content to be misinterpreted as a list. The failure message about "Invalid Context 0: - 固定中文环境..." suggests the patch engine was expecting that line. I’ll need to create new content with updated sections. For example, sections like "命名与结构" will use hyphens for list items, but I’ll remove any bullets before key referencing lines. I’ll also produce new content for 'testing-and-run.mdc', avoiding problematic bullet lines and using plain text paragraphs. Let’s apply the patch twice to ensure it’s correct!</details></think>

---

我将创建剩余的两条规则：`dart-style.mdc` 与 `testing-and-run.mdc`，并写入 `.cursor/rules` 目录。

---



---



---



---

### 状态更新
- 已并行扫描 `README.md`、`simple_live_app` / `simple_live_tv_app` / `simple_live_core` / `simple_live_console` 的关键入口与路由、网络、日志等文件。
- 已在 `.cursor/rules` 下创建 6 条 Cursor 规则，覆盖项目结构导航、GetX 路由约定、网络封装、日志与调试、Dart/Flutter 风格、测试与运行指引。

### 已生成的 Cursor 规则
- `project-structure.mdc`: 项目结构与关键入口导航（核心库、App、TV、Console、路由位置、网络/日志位置）。
- `getx-navigation.mdc`: App 的 GetX 路由与依赖注入约定，新增页面步骤与导航示例。
- `networking.mdc`: 基于 Dio 的统一网络封装与错误处理约定，使用范式与拦截器说明。
- `logging-debug.mdc`: App/TV 的日志记录与调试视图说明，包含 Core 日志与 App 日志对接。
- `core-extension.mdc`: 在 `simple_live_core` 扩展新站点与弹幕的步骤与关键接口位置。
- `dart-style.mdc`: Dart/Flutter 风格约定与 lints 对齐、命名/结构/日志/错误、本地化建议。
- `testing-and-run.mdc`: 测试目录、常用运行/测试命令、Console 示例入口与联网运行提示。

### 你现在可以如何使用
- 在 Cursor 中，这些规则会自动帮助 AI 导航到关键文件，如 `simple_live_app/lib/routes/app_pages.dart`、`simple_live_app/lib/requests/http_client.dart`、`simple_live_core/lib/simple_live_core.dart`，并指导新增页面、请求与日志接入的最佳路径。

- **规则存放位置**: `.cursor/rules/*.mdc` 已创建；若需补充更多团队规范，可继续在该目录下新增 `.mdc` 文件。

- 如需我为 TV 端路由、模块分层或核心库的接口定义补写更细的规则，告诉我具体侧重点即可，我会补充相应 `.mdc`。

---

